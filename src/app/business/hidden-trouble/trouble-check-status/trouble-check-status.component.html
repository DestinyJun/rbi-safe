<div class="check-status">
  <h2 class="title text-center pt-3 pb-3 text-littleGray">隐患分析</h2>
  <div class="header pt-2 pb-2">
    <div class="ui-inputgroup"></div>
    <div class="button" style="padding-right: 30px">
      <button pButton type="button" [label]="troubleCheckOrgTreeSelectLabel" class="ui-button-secondary" (click)="troubleCheckOperate(troubleCheckOperateFlag = 'tree')"></button>
    </div>
  </div>
  <div class="content">
    <div class="ui-g" style="height: 100%">
      <!--隐患整改率-->
      <div class="ui-g-7 ui-md-7" style="height: 80%">
        <app-echarts-bar-line
          yAxisSplitLineType="dashed"
          [isShowDotted]="false"
          [showSplitLine]="true"
          [showAxisLabel]="true"
          [echartData]="troubleCheckChart"
          [barColor]="['#4261df', '#58c1f9', '#63dcaf', '#ffd800', '#ff7800']"
          [lineColor]="['#B2A0FE', '#FF9AA7']"
          (chartClick)="troubleCheckOperate(troubleCheckOperateFlag = 'chart',$event)"
          title="隐患等级/隐患整改率">
        </app-echarts-bar-line>
      </div>
      <!--隐患占比-->
      <div class="ui-g-5 ui-md-5" style="height: 80%">
        <h4 style="padding-top: 10px;color: #4D4F5C"></h4>
        <p-calendar
          #calendarDate
          placeholder="点击选择开始日期"
          [locale]="troubleCheckEs" [(ngModel)]="troubleCheckStartTime"
          dateFormat="yy-mm-dd"
          dataType="string"
          [monthNavigator]="true"
          [yearNavigator]="true"
          [showTime]="false"
          yearRange="1930:2030">
          <p-footer>
            <button pButton type="button" label="关闭" class="ui-button-warning" (click)="calendarDate.hideOverlay()"></button>
          </p-footer>
        </p-calendar>
        <p-calendar
          styleClass="ml-3"
          #calendarDate
          placeholder="点击选择结束日期"
          [locale]="troubleCheckEs" [(ngModel)]="troubleCheckEndTime"
          dateFormat="yy-mm-dd"
          dataType="string"
          [monthNavigator]="true"
          [yearNavigator]="true"
          [showTime]="false"
          yearRange="1930:2030">
          <p-footer>
            <button pButton type="button" label="关闭" class="ui-button-warning" (click)="calendarDate.hideOverlay()"></button>
          </p-footer>
        </p-calendar>
        <button pButton type="button" label="查询" class="ui-button-danger ml-3" (click)="troubleCheckOperate(troubleCheckOperateFlag = 'changeChart')"></button>
        <app-echarts-pie-trouble
          [title]="'隐患占比'"
          unit="起"
          [color]="['#58C1F9', '#63DCAF','#FFC06A']"
          [echartData]="troubleCheckPie">
        </app-echarts-pie-trouble>
      </div>
    </div>
  </div>
  <div class="modal">
    <!--组织树弹窗-->
    <p-dialog
      [modal]="true"
      [(visible)]="troubleCheckOrgTreeModal" [blockScroll]="true"
      [contentStyle]="{width: '30vw',height: '30vh'}">
      <p-header>请选择组织单位</p-header>
      <p-scrollPanel [style]="{width: '100%', height: '250px'}">
        <p-tree
          [style]="{width: '100%'}"
          [value]="troubleCheckOrgTree"
          [(selection)]="troubleCheckOrgTreeSelect"
          selectionMode="single">
        </p-tree>
      </p-scrollPanel>
      <p-footer>
        <button type="button" pButton icon="pi pi-check" (click)="troubleCheckOperate('select')" label="确定"></button>
      </p-footer>
    </p-dialog>
  </div>
</div>

